<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    vue 组件封装 |
    
    JackChouMine</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="outer">
  <article id="post-vue-组件封装" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      vue 组件封装
    </h1>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/05/vue-组件封装/" class="article-date">
  <time datetime="2019-06-04T17:30:29.000Z" itemprop="datePublished">2019-06-05</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a> / <a class="article-category-link" href="/categories/前端框架/">前端框架</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>本文记录一下 Vue 组件封装的基本实践和一些组件的相关知识。主要涉及以下知识点：</p>
<ul>
<li>封装一个组件的代码组织形式；</li>
<li>vue 组件的三大核心：
<ul>
<li>属性（props、data）;</li>
<li>事件</li>
<li>插槽</li>
</ul>
</li>
<li>样式</li>
<li>其他一些杂项
<ul>
<li>$nextTick 函数的使用</li>
<li>获取 DOM 元素及在父级组件中执行子组件方法</li>
</ul>
</li>
</ul>
<p>使用第三方计数库 <a href="https://inorganik.github.io/countUp.js/" target="_blank" rel="noopener">countup.js</a> 创建一个 <code>count-to</code> 组件对以上知识进行总结。</p>
<a id="more"></a>
<h2 id="文件组织形式"><a class="markdownIt-Anchor" href="#文件组织形式"></a> 文件组织形式</h2>
<p>在组件文件夹 <code>component</code> 下创建一个与组件名相同的文件，文件夹内必须有 <code>index.js</code>,并将组件导入到该文件中，这样方便我们引用组件。</p>
<p><code>count-to</code> 文件夹内：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'./count-to.vue'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CountTo</span><br></pre></td></tr></table></figure>
<p>使用组件时，只需这样引入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span> <span class="comment">// _c 是组件存放路径</span></span><br></pre></td></tr></table></figure>
<h2 id="vue-组件的三大核心"><a class="markdownIt-Anchor" href="#vue-组件的三大核心"></a> Vue 组件的三大核心</h2>
<h3 id="属性props-data-和样式"><a class="markdownIt-Anchor" href="#属性props-data-和样式"></a> 属性（props、data 和样式）</h3>
<p>props 定义了组件<code>可配置</code>的数据，确定的组件的核心功能。封装组件时，props 推荐写成对象形式，方便对数据进行验证，提高了代码健壮性也能明确如何使用。</p>
<p>常见的检查类型：<code>Number</code>、<code>String</code>、<code>Boolean</code>、<code>Array</code>、<code>Object</code>、<code>Date</code>、<code>Function</code>、<code>Symbol</code>、<code>构造函数</code>。<code>null|undefined</code> 会通过所有类型。</p>
<p>还可以自定义验证函数，指定是否必须和默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">props:&#123;</span><br><span class="line">	<span class="comment">// 多个可能的类型</span></span><br><span class="line">  propB: [<span class="built_in">String</span>, <span class="built_in">Number</span>],</span><br><span class="line">	<span class="comment">// 必填的字符串</span></span><br><span class="line">  propC: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带有默认值的数字</span></span><br><span class="line">  propD: &#123;</span><br><span class="line">    type: <span class="built_in">Number</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="number">100</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带有默认值的对象</span></span><br><span class="line">  propE: &#123;</span><br><span class="line">    type: <span class="built_in">Object</span>,</span><br><span class="line">    <span class="comment">// 对象或数组默认值必须从一个工厂函数获取</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">message</span>: <span class="string">'hello'</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 自定义验证函数</span></span><br><span class="line">  propF: &#123;</span><br><span class="line">    validator: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 这个值必须匹配下列字符串中的一个</span></span><br><span class="line">      <span class="keyword">return</span> [<span class="string">'success'</span>, <span class="string">'warning'</span>, <span class="string">'danger'</span>].indexOf(value) !== <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过阅读 <a href="https://github.com/inorganik/CountUp.js" target="_blank" rel="noopener">countUP 文档</a>，了解到构造函数<code>CountUp</code> 的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CountUp(eleDOM, startValue, endValue, decimals, duration, options) <span class="comment">// eleDOM 是数值显示的元素；endValue 是数值的最终值，这两个参数必须的。</span></span><br></pre></td></tr></table></figure>
<p>组件代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description 起始值</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      startValue: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description 终止值</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      endValue: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">        required: <span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description 小数点后保留几位小数（精度）</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      decimals: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description 渐变时长(秒)</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      duration: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       *@description 变速效果</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      useEasing: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       *@description 分组</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      useGrouping: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       *@description 分组符号 2,2234</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      separator: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="string">','</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       *@description 整数小数分隔符 34.56</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      decimal: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="string">'.'</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description  动画延迟（秒）</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      delay: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    computed: &#123;</span></span><br><span class="line"><span class="undefined">      eleId() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用 this.uid 生成组件内唯一id</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">`count_up_uid<span class="subst">$&#123;<span class="keyword">this</span>._uid&#125;</span>`</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    mounted() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// <span class="doctag">TODO:</span> this.$nextTick</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> options = &#123;</span></span><br><span class="line"><span class="actionscript">          useEasing: <span class="keyword">this</span>.useEasing,</span></span><br><span class="line"><span class="actionscript">          useGrouping: <span class="keyword">this</span>.useGrouping,</span></span><br><span class="line"><span class="actionscript">          separator: <span class="keyword">this</span>.separator,</span></span><br><span class="line"><span class="actionscript">          decimal: <span class="keyword">this</span>.decimal,</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter = <span class="keyword">new</span> CountUp(</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.eleId,</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.startValue,</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.endValue,</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.decimals,</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.duration,</span></span><br><span class="line"><span class="undefined">          options</span></span><br><span class="line"><span class="undefined">        )</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>代码说明：<br>
<code>this._uid</code> 用于生成<code>组件内唯一</code>的 id 值，可用作元素的 id，值是递增的。<br>
<code>this.$nextTick</code> 函数接收一个回调函数作为参数，回调函数会在 <code>DOM更新</code> 之后执行，如果某些操作必须在 DOM 更新之后，可将这些操作作为其参数。</p>
<p>计数组件的基本功能就满足了。</p>
<p>这样使用组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"这个会挂载到组件根元素上"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'count_to'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      CountTo,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        endValue: 4000,</span></span><br><span class="line"><span class="undefined">        decimals: 2,</span></span><br><span class="line"><span class="actionscript">        className: <span class="string">''</span>,</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">count-to</span> <span class="attr">:end-value</span>=<span class="string">"endValue"</span> <span class="attr">:decimals</span>=<span class="string">"decimals"</span> <span class="attr">:duration</span>=<span class="string">"5"</span>&gt;</span><span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>prop 的命名：</p>
<p>组件中使用<code>小驼峰</code>命名，传递值是使用<code>-</code>。</p>
<p>关于 props 传递静态值：</p>
<p>不使用 <code>v-bind</code> 即 <code>:</code> 传递的是静态值，是一个字符串字常量，而不是变量，而使用<code>:</code>指令传递的值，是有类型的。<code>:duration=&quot;5&quot;</code> 传递是 数值 5，<code>duration=&quot;5&quot;</code> 传递字符串<code>'5'</code>。<br>
<code>duration=&quot;true&quot;</code> 传递的是字符串<code>true</code> 而不是 Boolean 值真值。</p>
<p>默认值：</p>
<p>传递是引用类型的值（对象和数组），默认值需要使用一个工厂函数返回一个引用类型的值。</p>
<p>inheritAttrs：</p>
<p>如果传递一个组件中没有声明的属性，该属性会挂载都组件元素上，可在组件中将 <code>inheritAttrs</code> 设置为 <code>false</code> 取消这一行为。上面的 <code>title</code> 属性会挂载到组件的 <code>div</code> 上。该属性不应 style 和 calss 的传递。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">  <span class="attr">title</span>=<span class="string">"会挂载到组件的根元素上"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">test</span>=<span class="string">"test"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>title 会成为<code>count-to</code> 组件的根元素的属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span>=<span class="string">"这是标题"</span> <span class="attr">test</span>=<span class="string">"测试"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"count_up_uid14"</span>&gt;</span>10,000.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>$attrs 接收没有声明的属性</p>
<p>title 和 test 属性没有在组件中声明，依然可以在组件中使用 <code>attrs</code> 接收到些属性：<br>
<code>&lt;span&gt;没有props接收的父组件数据：&lt;/span&gt;&lt;br/&gt;</code></p>
<p>最后的结果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span>=<span class="string">"这是标题"</span> <span class="attr">test</span>=<span class="string">"测试"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>没有props接收的父组件数据：&#123; "title": "这是标题", "test": "测试" &#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"count_up_uid14"</span>&gt;</span>10,000.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>inheritAttrs: false 和 $attrs 结合使用：</p>
<p><strong>有了 inheritAttrs: false 和 $attrs，你就可以手动决定这些特性会被赋予哪个元素，而不需要声明变量接收</strong>。</p>


<p class="codepen" data-height="551" data-theme-id="0" data-default-tab="js,result" data-user="JackZhouMine" data-slug-hash="yWZdRv" style="height: 551px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="$attrs使用">
  <span>See the Pen <a href="https://codepen.io/JackZhouMine/pen/yWZdRv/" target="_blank" rel="noopener">
  $attrs使用</a> by JackZhouMine (<a href="https://codepen.io/JackZhouMine" target="_blank" rel="noopener">@JackZhouMine</a>)
  on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<h4 id="data-vs-props"><a class="markdownIt-Anchor" href="#data-vs-props"></a> data vs props</h4>
<p>props 从父级组件入，传入的值由父级组件维护，不允许在子组件中<strong>直接操作</strong>,是否必需和数据类型都是确定的，我们不能改变。</p>
<p>data 是组件内部维护的状态，组件可直接操作，可随时改变值、类型等。</p>
<p>相同点：都是组件的属性，改变两者都会响应到模板上。</p>
<h4 id="打破-props-单向数据流"><a class="markdownIt-Anchor" href="#打破-props-单向数据流"></a> 打破 props 单向数据流</h4>
<p>Vue 不允许在子组件中<strong>直接操作</strong> props ,否则会报错，因为父组件和子组件都可直接操作 props，会使得 props 的管理变得混乱。可通过一些间接的方式操作 props:</p>
<ol>
<li>将 props 赋值给 data ，然后操作 data;</li>
<li>在计算属性中返回 props;</li>
</ol>
<p>以上两种方式，修改后的值，是不能会响应到父组件的，想要在父级组件中也看到修改，需要用到下面的方式：</p>
<ol start="3">
<li>.sync 和 $emit 结合</li>
</ol>
<p>传递 props 时加上 <code>.sync</code> 修饰符，在子组件内部使用 <code>$emit</code> 更新 props。</p>
<p>使用 <code>.sync</code> 需要注意：</p>
<ul>
<li>不能和表达式一起使用：<code>v-bind:title.sync=&quot;doc.title + '!'&quot;</code>;</li>
<li>不能传递对象字面量：<code>v-bind.sync=&quot;{ title: doc.title }&quot;</code>。</li>
</ul>
<ol start="4">
<li>传递引用类型的 props</li>
</ol>
<p>传递数组和对象，在子组件中修改他们，会直接反应到父组件上。</p>
<h3 id="事件"><a class="markdownIt-Anchor" href="#事件"></a> 事件</h3>
<p>传统的 web 开发使用事件驱动：</p>
<ul>
<li>查询节点 → 绑定事件监听；</li>
<li>用在页面上触发事件 → 执行监听器，修改 DOM,反馈到页面上；<br>
这种模式开发效率低成本高。</li>
</ul>
<p>Vue 的核心思想是数据驱动，视图由数据决定。MVVM 架构的页面变化流程：</p>
<p>View(用户操作) → 执行 DOMlistenrs (ViewModel) → Data 改变 （Model）→ View 改变。</p>
<p>组件和绑定原生事件和自定义事件，绑定原生事件时，需要添加<code>native</code>修饰符。</p>
<p>可以在组件的原生事件处理器中触发一个自定义事件，就能在父级组件中监听该事件，执行相关操作。</p>
<p>在 <code>count-to</code> 声明一个 <code>changeValue</code> 事件：</p>
<p>增加一个按钮：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"add"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在事件处理器<code>add</code>中触发一个自定义事件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add() &#123;</span><br><span class="line">	<span class="keyword">this</span>.$emit(<span class="string">"changeValue"</span>, <span class="built_in">Math</span>.random() * <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>$emit</code> 的第一个参数是事件名称，第二个参数是传递到该事件监听器的参数。</p>
<p>在组件上监听 <code>changValue</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">changeValue</span>=<span class="string">"changeValue"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'count_to'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      CountTo,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        endValue: 4000,</span></span><br><span class="line"><span class="undefined">        decimals: 2,</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      changeValue(value) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.endValue += value</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>自定义一个更新结束事件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      getCount() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用 id 获取 DOM</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> span = <span class="built_in">document</span>.getElementById(<span class="keyword">this</span>.eleId)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> currentValue = <span class="built_in">Number</span>.parseFloat(span.innerText.split(<span class="string">','</span>).join(<span class="string">''</span>))</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> currentValue.toFixed(<span class="keyword">this</span>.decimals)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      emitEnd() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$emit(<span class="string">'on-end'</span>, <span class="keyword">this</span>.getCount())</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// this.$emit('on-end', this.endValue) 使用 endValue 不是 库处理后的值，所有使用 DOM 元素获取更新后的值</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 监听 props 属性的变化</span></span></span><br><span class="line"><span class="undefined">    watch: &#123;</span></span><br><span class="line"><span class="undefined">      endValue(newValue) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// update 是库的方法</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter.update(newValue)</span></span><br><span class="line"><span class="javascript">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.emitEnd()</span></span><br><span class="line"><span class="actionscript">        &#125;, <span class="keyword">this</span>.duration * <span class="number">1000</span> + <span class="number">2</span>)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在组件上使用监听<code>on-end</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">on-end</span>=<span class="string">"endUp"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'count_to'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      CountTo,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        endValue: 4000,</span></span><br><span class="line"><span class="undefined">        decimals: 2,</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 更新接收后，会触发自定义事件，然后执行该函数</span></span></span><br><span class="line"><span class="undefined">      endUp(value) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'endValue =&gt; '</span>, value)</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="表单修饰符"><a class="markdownIt-Anchor" href="#表单修饰符"></a> 表单修饰符</h4>
<ul>
<li>lazy ： 在<code>change</code>事件同步数据；</li>
<li>trim ： 删除首尾空格；</li>
<li>number ：只能输入数字；</li>
</ul>
<h4 id="事件修饰符"><a class="markdownIt-Anchor" href="#事件修饰符"></a> 事件修饰符</h4>
<ul>
<li>stop：阻止冒泡；</li>
<li>prevent :阻止默认行为；</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止单击事件继续传播 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on</span> <span class="attr">:click.stop</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on</span> <span class="attr">:submit.prevent</span>=<span class="string">"onSubmit"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">"doThat"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="插槽"><a class="markdownIt-Anchor" href="#插槽"></a> 插槽</h3>
<p>props 传递普通的数据类型，插槽提供了<code>传递 HTML 代码</code>的方式，父组件中给的插槽内容，会被放置到子组件的指定为位置。</p>
<p>父组件决定是否显示插槽和怎样显示，子组件决定插槽显示的位置。</p>
<p>三种插槽：</p>
<ul>
<li>匿名插槽；</li>
<li>命名插槽；</li>
<li>作用域插槽。</li>
</ul>
<p>我们现在想要在 数值左边显示一个从父级组件传递到组件中的文字提示，数值右边显示人民币符号。</p>
<p>可使用插槽接收文字提示和人民币符号：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 匿名插槽 找不到放置的位置，就放在这里--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 命名插槽--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在父级组件传递插槽内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span> <span class="attr">:end-value</span>=<span class="string">"endValue"</span> <span class="attr">:decimals</span>=<span class="string">"decimals"</span> <span class="attr">:duration</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>金额：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span> ￥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>最后的 html 是这样的：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>金额：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"count_up_uid13"</span>&gt;</span>4,000.00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span> ￥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>不传递插槽内容时，可以在组件中设置一个默认的插槽内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>奖金额度：<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span> ￥<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>父级组件的作用域和子组件的作用是独立的，在父级组件的插槽内容中，获取不到子组件的数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span> <span class="attr">:end-value</span>=<span class="string">"endValue"</span> <span class="attr">:decimals</span>=<span class="string">"parentDecimals"</span> <span class="attr">:duration</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>精确到几位小数：&#123;&#123;parentDecimals&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>&#123;&#123;decimals&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>parentDecimals</code> 是父级组件中的属性，插槽内容属于父级作用域，可获取父级的数据；<br>
<code>decimals</code> 是子级组件中的属性，插槽内容属于父级作用域，获取不到值；</p>
<p>想要在父级插槽内容中获取子组件的数据，就需要用到作用域插槽。</p>
<p>现在想要把数值前面的文字从父级组件传递到子组件，并且还要传递文字的颜色：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text: &#123;</span><br><span class="line">	name: <span class="string">"本月工资"</span>,</span><br><span class="line">	color: <span class="string">"#F4D03F"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>子组件这样定义：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--向父级组件传递text 并起了名字--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-bind</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span>奖金额度：<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span> <span class="attr">ref</span>=<span class="string">"number"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span> 元<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 增加 prop</span></span></span><br><span class="line"><span class="undefined">      text: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样使用组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:text</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"data"</span> <span class="attr">slot</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">"&#123;color:data.color&#125;"</span>&gt;</span>&#123;&#123;data.name&#125;&#125;：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>￥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'count_to'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      CountTo,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        text: &#123;</span></span><br><span class="line"><span class="actionscript">          name: <span class="string">'本月工资'</span>,</span></span><br><span class="line"><span class="actionscript">          color: <span class="string">'#F4D03F'</span>,</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        endValue: 4000,</span></span><br><span class="line"><span class="undefined">        decimals: 2,</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;slot v-bind=&quot;text&quot;&gt;奖金额度：&lt;/slot&gt;</code>，向父级组件传递数据；<br>
<code>slot-scope=&quot;data&quot;</code> 用来接收插槽传递到父组件的数据；</p>
<h4 id="新指令-v-slot"><a class="markdownIt-Anchor" href="#新指令-v-slot"></a> 新指令 v-slot</h4>
<p>在 2.6.0 中，我们为具名插槽和作用域插槽引入了一个新的统一的语法 (即 v-slot 指令)。它取代了 slot 和 slot-scope 。</p>
<p>子组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 向父级组件传递 textFromChild --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:textFromChild</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span>奖金额度：<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span> <span class="attr">ref</span>=<span class="string">"number"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span> 元<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 增加 prop</span></span></span><br><span class="line"><span class="undefined">      text: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样使用组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:text</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:left</span>=<span class="string">"&#123;textFromChild&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">"&#123;color:textFromChild.color&#125;"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>&#123;&#123;textFromChild.name&#125;&#125;：<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>￥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>子组件传递过来的变量被放置在一个对象中，使用解构赋值的方式提取出来。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:left</span>=<span class="string">"&#123;textFromChild&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">"&#123;color:textFromChild.color&#125;"</span>&gt;</span>&#123;&#123;textFromChild.name&#125;&#125;：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>v-slot</code> 指令后跟一个 slot 的名字，插槽具有名字时，可简写为<code>#</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">left</span>=<span class="string">"&#123;textFromChild&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">"&#123;color:textFromChild.color&#125;"</span>&gt;</span>&#123;&#123;textFromChild.name&#125;&#125;：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>不管有几个插槽，都把插槽内容放置在 <code>template</code> 中是很好的做法。</p>
<h2 id="其他杂项"><a class="markdownIt-Anchor" href="#其他杂项"></a> 其他杂项</h2>
<h3 id="组件生成-id"><a class="markdownIt-Anchor" href="#组件生成-id"></a> 组件生成 id</h3>
<p>使用<code>this_uid</code>其他字母，可成组件内唯一的 id。<br>
<code>count-to</code>组件中，我们使用计算属性，设置 span 的 id。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eleId() &#123;</span><br><span class="line">      <span class="comment">// 使用 this.uid 生成全局唯一id</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">`count_up_uid<span class="subst">$&#123;<span class="keyword">this</span>._uid&#125;</span>`</span>;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<p>在组件内部，可以通过 id 或者 class 等获取到 dom，但是不推荐这么做。可通过<code>ref</code> 属性，获取到<code>DOM</code>，更加简洁，并且可以直接通过<code>ref</code> 获取组件或者<code>DOM</code>元素。</p>
<p>在下面的函数中获取 DOM：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">getCount() &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 获取 DOM</span></span><br><span class="line">  <span class="comment">// 使用 ref 属性获取 DOM 元素</span></span><br><span class="line">  <span class="comment">// console.log(this.$refs.number.innerText)</span></span><br><span class="line">  <span class="comment">// return this.$refs.number.innerText</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用 id 获取 DOM</span></span><br><span class="line">  <span class="keyword">let</span> span = <span class="built_in">document</span>.getElementById(<span class="keyword">this</span>.eleId);</span><br><span class="line">  <span class="keyword">let</span> currentValue = <span class="built_in">Number</span>.parseFloat(span.innerText.split(<span class="string">","</span>).join(<span class="string">""</span>));</span><br><span class="line">  <span class="keyword">return</span> currentValue.toFixed(<span class="keyword">this</span>.decimals);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="nexttick-函数的使用"><a class="markdownIt-Anchor" href="#nexttick-函数的使用"></a> $nextTick 函数的使用</h3>
<p><code>this.$nextTick</code> 接收一个回调函数作为参数，参数会在 Vue 完成 DOM 更新后立即调用。如果某些操作是依赖 DOM 更新后的，可以把这些操作放在回调函数里执行。</p>
<ul>
<li>在 created 和 mounted 阶段，如果需要操作渲染后的试图，也要使用 nextTick 方法。</li>
<li>mounted 不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用 vm.$nextTick 替换掉 mounted。</li>
</ul>
<p><code>Vue.$nexttick</code> 全局的，<code>this.$nexttick</code> 是局部的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">'123'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">vm.message = <span class="string">'new message'</span> <span class="comment">// 更改数据</span></span><br><span class="line">vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// false  此时DOM还没渲染</span></span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Vue DOM 的更新是异步的，数据变化后，组件不会立即渲染，而是在事件队列刷新时，在下一个事件循环 <code>tick</code> 中渲染。</p>
<p><code>$nexttick</code> 返回一个 Promise，可使用 <code>await</code> 关键词调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  updateMessage: <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.message = <span class="string">'已更新'</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; '未更新'</span></span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">this</span>.$nextTick()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; '已更新'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="在父级组件中调用子组件的方法"><a class="markdownIt-Anchor" href="#在父级组件中调用子组件的方法"></a> 在父级组件中调用子组件的方法</h3>
<p>有时候需要再父级组件中调用子组件的方法。可以在使用组件时指定 <code>ref</code> ，然后使用 <code>ref</code> 调用。<br>
比如调用组件的暂停方法，使得数据变化暂停。</p>
<p>在组件中定义暂停方法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:textFromChild</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span>奖金额度：<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span> <span class="attr">ref</span>=<span class="string">"number"</span> <span class="attr">:class</span>=<span class="string">"countClass"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span> 元<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// <span class="doctag">TODO:</span> 在父级组件中使用封装组件内部的方法</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 在父级组件中调用该方法，实现暂停</span></span></span><br><span class="line"><span class="undefined">      pause() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter.pauseResume()</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在父组件中使用调用组件暂停方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">count-to</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:end-value</span>=<span class="string">"endValue"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:decimals</span>=<span class="string">"decimals"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:duration</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">"countTo"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 指定 ref --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">left</span>=<span class="string">"&#123;textFromChild&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">"&#123;color:textFromChild.color&#125;"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>&#123;&#123;textFromChild.name&#125;&#125;：<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"right"</span>&gt;</span>￥<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">count-to</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"pasue"</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountTo <span class="keyword">from</span> <span class="string">'_c/count-to'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'count_to'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      CountTo,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    data() &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">        endValue: 4000,</span></span><br><span class="line"><span class="undefined">        decimals: 2,</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      pasue() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用 refs 访问组件，然后调用器方法</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$refs.countTo.pause()</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="样式"><a class="markdownIt-Anchor" href="#样式"></a> 样式</h2>
<p>组件使用样式，用三种方式：</p>
<ul>
<li>外部样式；</li>
<li>内部样式；</li>
<li>通过 props 传入 类名，以指定使用内部样式中的哪个类名。</li>
</ul>
<p>外部样式两种方法引入：<br>
在 <code>script</code> 标签中引入和在 <code>style</code> 标签中引入。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:textFromChild</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span>奖金额度：<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 将 props 中的类绑定到 class 上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:id</span>=<span class="string">"eleId"</span> <span class="attr">ref</span>=<span class="string">"number"</span> <span class="attr">:class</span>=<span class="string">"countClass"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span> 元<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 引入样式方法一：</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">// import './count-to.css'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> CountUp <span class="keyword">from</span> <span class="string">'countup'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'CountTo'</span>,</span></span><br><span class="line"><span class="actionscript">    inheritAttrs: <span class="literal">true</span>, <span class="comment">// 不让父作用域的属性挂载到组件的根元素上</span></span></span><br><span class="line"><span class="undefined">    props: &#123;</span></span><br><span class="line"><span class="undefined">      /**</span></span><br><span class="line"><span class="undefined">       * @description  自定义样式类名</span></span><br><span class="line"><span class="undefined">       */</span></span><br><span class="line"><span class="undefined">      className: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">default</span>: <span class="string">''</span>,</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="comment">/* 引入样式方法二 */</span></span></span><br><span class="line"><span class="css">  <span class="comment">/* @import './count-to.css' */</span></span></span><br><span class="line"><span class="css">  <span class="comment">/*  内部样式 */</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.count-to-number</span> &#123;</span></span><br><span class="line"><span class="undefined">    color: red;</span></span><br><span class="line"><span class="undefined">    font-size: 30px;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过 props 传递类名，实际是在父级组件中指定使用内部样式中的哪个类。</p>
<p>通过 <code>style</code> 也可以应用样式到组件上。</p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>封装一个组件 props 和 data 决定了组件的核心功能，插槽用于向组件传递 html 标签，使得组件更加具有扩展性。通过事件我们可以对组件进行某些操作。改天分析一个第三方组件，好好体会一下这些概念。</p>
<h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2>
<ul>
<li><a href="https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&amp;mid=2247483942&amp;idx=1&amp;sn=bb123cb4d34f94f79881f0fa226da26b&amp;chksm=c06683b0f7110aa6baf6e8ab59870a10fbf9a07083910054a25e67e50d306985103570d88ca2&amp;mpshare=1&amp;scene=24&amp;srcid=&amp;key=ae82afc765e556e1414e399de49e6bc8869fd285d0066971f5cc9b598ff7de811cb0d815acce725f87095b807115ec769907ccf0085d396ef53cc02e077effe6860c3ee0bd74fdf19ca63f73b15a6ba4&amp;ascene=14&amp;uin=MTMzNjE2MjkyMg%3D%3D&amp;devicetype=Windows+7&amp;version=62060833&amp;lang=zh_CN&amp;pass_ticket=ErOTla1jgsmijn6aCklGP3WGqdRSH9bBBL5cgmhDAhNizyP7X0BxM9stZwgKIQOG" target="_blank" rel="noopener">详解 vue 组件三大核心概念</a></li>
<li><a href="https://juejin.im/post/5a6fdb846fb9a01cc0268618" target="_blank" rel="noopener">简单理解 Vue 中的 nextTick</a></li>
<li><a href="https://segmentfault.com/a/1190000012861862" target="_blank" rel="noopener">vue.nextTick 的原理和用途</a></li>
<li><a href="https://ustbhuangyi.github.io/vue-analysis/reactive/next-tick.html#js-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener">nextTick</a></li>
<li><a href="https://vuejsdevelopers.com/2019/01/22/vue-what-is-next-tick/" target="_blank" rel="noopener">What the Tick is Vue.nextTick?</a></li>
<li><a href="https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81" target="_blank" rel="noopener">vue 文档 Prop</a></li>
</ul>

      
    </div>
    
<h3 style="text-align:center">如有帮助，谢谢您请我喝咖啡 <i class="fe fe-smile"></i></h3>
<p class="reward" style="text-align:center">
  <img src="https://raw.githubusercontent.com/jackchoumine/jack-picture/master/alipay2.jpg" title="支付宝扫一扫" alt="支付宝收款二维码" width="30%" height="30%" style="display:inline;"><img src="https://raw.githubusercontent.com/jackchoumine/jack-picture/master/weixin2.jpg" title="微信扫一扫" alt="微信打赏二维码" width="30%" height="30%" style="display:inline;">
</p>

    

  <div class="declare">
    <strong>本文作者：</strong>
    
      JackChouMine
    
    <br>
    <strong>本文链接：</strong>
    https://JackChouMine.github.io/2019/06/05/vue-组件封装/
    <br>
    <strong>版权声明：</strong>
    本作品采用
    <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    进行许可。转载请注明出处！
    
      <br>
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      <img alt="知识共享许可协议" title="CC BY-NC-SA 4.0" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
      </a>
    
  </div>

    <footer class="article-footer">
      <a data-url="https://JackChouMine.github.io/2019/06/05/vue-组件封装/" data-id="ckd7fo1un003ksbqoy11yv23f" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端框架/">前端框架</a></li></ul>

    </footer>
  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/06/09/Fetch-API-入门使用/" class="article-nav-link">
        <strong class="article-nav-caption">前一篇</strong>
        <div class="article-nav-title">
          
            Fetch API 入门使用
          
        </div>
      </a>
    
    
      <a href="/2019/05/26/vue-状态管理（三）/" class="article-nav-link">
        <strong class="article-nav-caption">后一篇</strong>
        <div class="article-nav-title">vue 状态管理（三）</div>
      </a>
    
  </nav>


  
  
  <div class="recommended_posts">
    <h3>推荐阅读</h3>
    <ul>
    
    
      <li>
        <a href="https://JackChouMine.github.io/2019/06/15/web-worker-实现浏览器多线程/" title="web worker 实现浏览器多线程" target="_blank">
        web worker 实现浏览器多线程
        </a>
      </li>
      
      <li>
        <a href="https://JackChouMine.github.io/2019/06/09/Fetch-API-入门使用/" title="Fetch API 入门使用" target="_blank">
        Fetch API 入门使用
        </a>
      </li>
      
      <li>
        <a href="https://JackChouMine.github.io/2019/05/26/vue-状态管理（三）/" title="vue 状态管理（三）" target="_blank">
        vue 状态管理（三）
        </a>
      </li>
      
      <li>
        <a href="https://JackChouMine.github.io/2019/05/26/vue-状态管理（二）/" title="vue 状态管理（二）" target="_blank">
        vue 状态管理（二）
        </a>
      </li>
      
    </ul>
  </div>

  
    
  <div class="gitalk" id="gitalk-container"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '90f92ec37c1bf3ff8c87',
      clientSecret: 'c746c91801c749223e933fb3393dd4fd7f0e53a6',
      repo: 'blog-comment',
      owner: 'jackchoumine',
      admin: ['jackchoumine'],
      // id: location.pathname,      // Ensure uniqueness and length less than 50
      id: md5(location.pathname),
      distractionFreeMode: false,  // Facebook-like distraction free mode
      pagerDirection: 'last'
    })

  gitalk.render('gitalk-container')
  </script>

  

</article>



</section>
  <footer class="footer">
  
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 JackChouMine</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean" target="_blank">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <!--
 * @Description: 侧边栏
 * @Date: 2020-07-29 21:03:01
 * @Author: JackChouMine
 * @LastEditTime: 2020-07-29 21:31:46
 * @LastEditors: JackChouMine
-->
<button class="navbar-toggle"></button>

<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/portrait.png" alt="JackChouMine"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="GitHub" href="https://github.com/jackchoumine" target="_blank">
        <i class="fe fe-github"></i>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="stackoverflow" href="https://stackoverflow.com/users/6524962/jackchoumine" target="_blank">
        栈溢
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="思否" href="https://segmentfault.com/u/jackzhoumine" target="_blank">
        思否
      </a>
    </li>
    
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
    <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="fe fe-feed"></i>
      </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>